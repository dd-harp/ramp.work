## -----------------------------------------------------------------------------
library(knitr)
library(ramp.xds)
library(ramp.work)

## ----echo=F-------------------------------------------------------------------
#devtools::load_all()

## ----show_pr------------------------------------------------------------------
show_pr = function(model, get_pr=F_pr, i=1){
  y = get_inits(model, flatten=TRUE)
  get_pr(list_Xvars(y, model, 1), model$Xpar[[1]])
}

## -----------------------------------------------------------------------------
SI <- xds_setup(Xname = "SIS", MYZname = "SI")

## ----eval=F-------------------------------------------------------------------
#  show_pr(SI)

## ----eval=F-------------------------------------------------------------------
#  SI <- dts_init_by_pr(.4, SI, F_pr, 365)
#  show_pr(SI)

## ----eval=F-------------------------------------------------------------------
#  ar <- dts_pr2ar_step(.4, si, F_pr)
#  ar

## ----eval=F-------------------------------------------------------------------
#  set.seed(230)
#  ar_ts <- ar*c(1, rlnorm(14, 1, 1))
#  ar_ts

## ----eval=F-------------------------------------------------------------------
#  si1 = si
#  pr_ts = show_pr(si1)
#  for(i in 2:length(ar_ts)){
#    y = update_by_ar(ar_ts[i], si1, 1)
#    si1 = update_inits(y, si1)
#    pr_ts = c(pr_ts, show_pr(si1))
#  }
#  pr_ts

## ----eval=F-------------------------------------------------------------------
#  ar_t <- dts_pr2ar_ts(pr_ts, si, F_pr)
#  sum((ar_ts-ar_t)^2) < 1e-9

