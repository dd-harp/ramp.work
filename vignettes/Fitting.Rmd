---
title: "Fitting Models to Data" 
date: "`r format(Sys.time(), '%B %d, %Y')`"
output:
  html_document: 
    theme: paper 
vignette: >
  %\VignetteIndexEntry{Fitting Models to Data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


Load the required packages:

```{r}
library(ramp.xds)
require(deSolve)
require(rootSolve)
require(ramp.work)
```

```{r, echo=F}
devtools::load_all()
```

```{r}
sis_si <- xds_setup(MYZname = "si")
sis_si <- xds_solve(sis_si)
```

```{r}
#F_obs
get_stat = function(pars){
  pr = tail(sis_si$outputs$orbits$XH[[1]]$true_pr, 1)
  return(pr)
}

get_par = function(pars){
  return(pars$Lpar[[1]]$Lambda)
}

put_par = function(x, pars){
  pars$Lpar[[1]]$Lambda = x
  return(pars)
}
```


```{r}
sis_si_fit <- xde_maximize_gof(c(0.8), sis_si, get_stat, get_par, put_par, F_sse, Tmax=100)
get_stat(sis_si_fit)
```

```{r}
sis_si_fit2 <- xde_maximize_gof(c(0.8), sis_si_fit, get_stat, get_par, put_par, F_sse, Tmax=100)
get_stat(sis_si_fit2)
sis_si_fit3 <- xde_maximize_gof(c(0.8), sis_si_fit2, get_stat, get_par, put_par, F_sse, Tmax=100)
get_stat(sis_si_fit3)
```


